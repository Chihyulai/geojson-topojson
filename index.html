<!DOCTYPE html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>GeoJSON to TopoJSON</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/normalize/2.1.0/normalize.css">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.min.css">
        <style>
          body {
            padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
          }
        </style>
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap-responsive.min.css">
    </head>
    <body>

        <div class="navbar navbar-inverse navbar-fixed-top">
          <div class="navbar-inner">
            <div class="container">
              <a class="brand" href="#">GeoJSON to TopoJSON</a>
            </div>
          </div>
        </div>

        <div class="container">
            <div class="row">
                <div class="span6">
                    <h2>GeoJSON</h2>
                    <textarea class="span6" rows="20" id="geojson"></textarea>
                    <button class="btn btn-large btn-primary" id="convert-button" type="button">Convert to TopoJSON <i class="icon-random icon-white"></i></button>
                </div>
                <div class="span6">
                    <h2>TopoJSON</h2>
                    <textarea class="span6" rows="20" id="topojson" readonly></textarea>
                </div>
            </div>
        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>
            $('#convert-button').click(function() {
              // First, clear the contents of our TopoJSON textarea
              $('#topojson').val('');
              // Then call our conversion function
              convertGeojsonToTopojson($('#geojson').val())
            });

            // Convert the given GeoJSON to TopoJSON
            var convertGeojsonToTopojson = function(geojson) {
                $.ajax({
                  url: '/',
                  type: "POST",
                  data: geojson,
                  contentType: "application/json; charset=utf-8",
                  dataType: "json",
                  success: function(data){
                    $('#topojson').val(JSON.stringify(data, null, 4));
                  }
                })
            };
        </script>
    </body>
</html>
